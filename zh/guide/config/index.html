
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../syslog_config/">
      
      
        <link rel="next" href="../sysadmin/">
      
      <link rel="icon" href="../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>基础配置 - OpenCloudOS Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#opencloudos-" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../" title="OpenCloudOS Documentation" class="md-header__button md-logo" aria-label="OpenCloudOS Documentation" data-md-component="logo">
      
  <img src="../../../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenCloudOS Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              基础配置
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
        </form>
      
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="选择当前语言">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="../../../guide/config/" hreflang="zh" class="md-select__link">
                    中文
                  </a>
                </li>
              
                <li class="md-select__item">
                  <a href="../../../en/guide/config/" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/OpenCloudOS/opencloudos.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    OpenCloudOS/opencloudos.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../" class="md-tabs__link">
      首页
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../quickstart/V9_install/" class="md-tabs__link">
        快速入门
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    

  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../grub2_boot/" class="md-tabs__link md-tabs__link--active">
        用户指南
      </a>
    </li>
  

  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../release/v8.5/" class="md-tabs__link">
        版本说明
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../faq/" class="md-tabs__link">
      常见问题
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../contribution/how-to/" class="md-tabs__link">
        参与贡献
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../adaptation/adaptation_process/" class="md-tabs__link">
        生态认证
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../migrate_relative/" class="md-tabs__link">
        CentOS停服专区
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../download/iso/" class="md-tabs__link">
        下载
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../tcase/proj/" class="md-tabs__link">
        测试
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="OpenCloudOS Documentation" class="md-nav__button md-logo" aria-label="OpenCloudOS Documentation" data-md-component="logo">
      
  <img src="../../../assets/logo.svg" alt="logo">

    </a>
    OpenCloudOS Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/OpenCloudOS/opencloudos.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    OpenCloudOS/opencloudos.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        首页
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          快速入门
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          快速入门
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/V9_install/" class="md-nav__link">
        OC V9 下载及安装
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/V8_install/" class="md-nav__link">
        OC V8 下载及安装
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/use/" class="md-nav__link">
        使用说明
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          用户指南
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          用户指南
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
          安装启动指南
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          安装启动指南
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_1" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_1_1" id="__nav_3_1_1_label" tabindex="0">
          系统启动管理
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1_1">
          <span class="md-nav__icon md-icon"></span>
          系统启动管理
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grub2_boot/" class="md-nav__link">
        系统引导管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../uefi_boot/" class="md-nav__link">
        UEFI引导启动项管理
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          系统管理指南
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          系统管理指南
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../syslog_config/" class="md-nav__link">
        日志管理
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          基础配置
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        基础配置
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    第一章 初始环境设置
  </a>
  
    <nav class="md-nav" aria-label="第一章 初始环境设置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    1.1 配置时间与日期
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-locale" class="md-nav__link">
    1.2 配置系统locale
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    第二章 配置管理网络环境
  </a>
  
    <nav class="md-nav" aria-label="第二章 配置管理网络环境">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    2.1 静态网络配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-dhcp" class="md-nav__link">
    2.2 DHCP网络配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-dns" class="md-nav__link">
    2.3 自定义DNS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemd" class="md-nav__link">
    第三章 systemd管理
  </a>
  
    <nav class="md-nav" aria-label="第三章 systemd管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    3.1 服务启动设置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    3.2 服务屏蔽
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    3.3 服务日常操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    第四章 账户管理
  </a>
  
    <nav class="md-nav" aria-label="第四章 账户管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    4.1 管理账户和组
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dump-crash" class="md-nav__link">
    第五章 dump crash内核
  </a>
  
    <nav class="md-nav" aria-label="第五章 dump crash内核">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-kdump" class="md-nav__link">
    5.1 kdump安装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52" class="md-nav__link">
    5.2 配置捕获内核大小
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53" class="md-nav__link">
    5.3 配置捕获内核的存放位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54" class="md-nav__link">
    5.4 触发内核崩溃
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-vmcore" class="md-nav__link">
    5.5 分析vmcore
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    第六章 日志分析
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemd_1" class="md-nav__link">
    第七章 systemd机制
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chrony" class="md-nav__link">
    第八章 chrony机制
  </a>
  
    <nav class="md-nav" aria-label="第八章 chrony机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81" class="md-nav__link">
    8.1 安装配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82" class="md-nav__link">
    8.2 添加时间源
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#83" class="md-nav__link">
    8.3 配置生效
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bond" class="md-nav__link">
    第九章 bond配置
  </a>
  
    <nav class="md-nav" aria-label="第九章 bond配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-bond" class="md-nav__link">
    9.1 bond的模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-bond" class="md-nav__link">
    9.2 配置bond
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lvm" class="md-nav__link">
    第十章 LVM管理
  </a>
  
    <nav class="md-nav" aria-label="第十章 LVM管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101" class="md-nav__link">
    10.1 基础概念
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102-lvm" class="md-nav__link">
    10.2 部署lvm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#103" class="md-nav__link">
    10.3 卷组管理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#104" class="md-nav__link">
    10.4 逻辑卷管理
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raid" class="md-nav__link">
    第十一章 软RAID管理
  </a>
  
    <nav class="md-nav" aria-label="第十一章 软RAID管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-raid" class="md-nav__link">
    11.1 RAID逻辑分类
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-raid10" class="md-nav__link">
    11.2 软RAID10部署
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113-raid" class="md-nav__link">
    11.3 卸载RAID阵列
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    第十二章 分区管理
  </a>
  
    <nav class="md-nav" aria-label="第十二章 分区管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121" class="md-nav__link">
    12.1 磁盘分区基础
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-mbr" class="md-nav__link">
    12.2 创建MBR分区
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123" class="md-nav__link">
    12.3 格式化分区
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#124" class="md-nav__link">
    12.4 挂载/卸载分区
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#125-gpt" class="md-nav__link">
    12.5 创建GPT分区
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#126" class="md-nav__link">
    12.6 调整分区大小
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#127-gpt" class="md-nav__link">
    12.7 删除GPT分区
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sysadmin/" class="md-nav__link">
        系统管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../update/" class="md-nav__link">
        内核更新
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../monitor/" class="md-nav__link">
        系统状态监控
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        安全加固
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
          存储管理
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_8">
          <span class="md-nav__icon md-icon"></span>
          存储管理
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/file_system/" class="md-nav__link">
        文件系统
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/configuring_and_managing_logical_volumes/" class="md-nav__link">
        逻辑卷管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/managing_storage_devices/" class="md-nav__link">
        可用的存储选项
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
          网络管理
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_9">
          <span class="md-nav__icon md-icon"></span>
          网络管理
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/Network1-6/" class="md-nav__link">
        1-6章
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/Network7-12/" class="md-nav__link">
        7-12章
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/Network13-18/" class="md-nav__link">
        13-18章
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/Network19-24/" class="md-nav__link">
        19-24章
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/Network25-30/" class="md-nav__link">
        25-30章
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/Network31-36/" class="md-nav__link">
        31-36章
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/Network37-42/" class="md-nav__link">
        37-42章
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/Network43-48/" class="md-nav__link">
        43-48章
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/Network49-54/" class="md-nav__link">
        49-54章
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/Network55-57/" class="md-nav__link">
        55-57章
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          版本说明
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          版本说明
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../release/v8.5/" class="md-nav__link">
        v8.5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../release/v8.6/" class="md-nav__link">
        v8.6
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../release/v9.0/" class="md-nav__link">
        v9.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../release/ocs/" class="md-nav__link">
        OpenCloudOS Stream
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../release/ocsk/" class="md-nav__link">
        OpenCloudOS Stream Kernel
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        常见问题
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          参与贡献
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          参与贡献
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribution/how-to/" class="md-nav__link">
        如何贡献
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribution/docs-format-guide/" class="md-nav__link">
        文档库格式手册
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribution/kernel-develop-guide/" class="md-nav__link">
        内核开发指南
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          生态认证
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          生态认证
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../adaptation/adaptation_process/" class="md-nav__link">
        生态认证流程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../adaptation/testcase/" class="md-nav__link">
        硬件测试用例
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
          认证兼容列表
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          认证兼容列表
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../adaptation/adaptation_hw/" class="md-nav__link">
        硬件兼容列表
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../adaptation/adaptation_sw/" class="md-nav__link">
        商业软件兼容列表
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../adaptation/adaptation_oss/" class="md-nav__link">
        开源软件兼容列表
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../adaptation/adaptation_FAQ/" class="md-nav__link">
        适配FAQ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          CentOS停服专区
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          CentOS停服专区
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../migrate_relative/" class="md-nav__link">
        CentOS停服专区
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../migrate/" class="md-nav__link">
        CentOS迁移OpenCloudOS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          下载
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          下载
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../download/iso/" class="md-nav__link">
        ISO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../download/mirrors/" class="md-nav__link">
        镜像源
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
          测试
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          测试
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tcase/proj/" class="md-nav__link">
        一、项目管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_2" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_10_2" id="__nav_10_2_label" tabindex="0">
          二、用例管理
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_10_2">
          <span class="md-nav__icon md-icon"></span>
          二、用例管理
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tcase/case_create/" class="md-nav__link">
        编写用例
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tcase/case_extract/" class="md-nav__link">
        提取用例
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tcase/case_import/" class="md-nav__link">
        导入用例
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tcase/case_set/" class="md-nav__link">
        用例集
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_3" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_10_3" id="__nav_10_3_label" tabindex="0">
          三、执行环境
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_10_3">
          <span class="md-nav__icon md-icon"></span>
          三、执行环境
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tcase/node/" class="md-nav__link">
        新增节点
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tcase/cluster/" class="md-nav__link">
        新增集群
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_4" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_10_4" id="__nav_10_4_label" tabindex="0">
          四、任务管理
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_10_4">
          <span class="md-nav__icon md-icon"></span>
          四、任务管理
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tcase/task_create/" class="md-nav__link">
        创建任务
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tcase/task_execute/" class="md-nav__link">
        执行任务
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    第一章 初始环境设置
  </a>
  
    <nav class="md-nav" aria-label="第一章 初始环境设置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    1.1 配置时间与日期
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-locale" class="md-nav__link">
    1.2 配置系统locale
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    第二章 配置管理网络环境
  </a>
  
    <nav class="md-nav" aria-label="第二章 配置管理网络环境">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    2.1 静态网络配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-dhcp" class="md-nav__link">
    2.2 DHCP网络配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-dns" class="md-nav__link">
    2.3 自定义DNS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemd" class="md-nav__link">
    第三章 systemd管理
  </a>
  
    <nav class="md-nav" aria-label="第三章 systemd管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    3.1 服务启动设置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    3.2 服务屏蔽
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    3.3 服务日常操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    第四章 账户管理
  </a>
  
    <nav class="md-nav" aria-label="第四章 账户管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    4.1 管理账户和组
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dump-crash" class="md-nav__link">
    第五章 dump crash内核
  </a>
  
    <nav class="md-nav" aria-label="第五章 dump crash内核">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-kdump" class="md-nav__link">
    5.1 kdump安装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52" class="md-nav__link">
    5.2 配置捕获内核大小
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53" class="md-nav__link">
    5.3 配置捕获内核的存放位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54" class="md-nav__link">
    5.4 触发内核崩溃
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-vmcore" class="md-nav__link">
    5.5 分析vmcore
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    第六章 日志分析
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemd_1" class="md-nav__link">
    第七章 systemd机制
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chrony" class="md-nav__link">
    第八章 chrony机制
  </a>
  
    <nav class="md-nav" aria-label="第八章 chrony机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81" class="md-nav__link">
    8.1 安装配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82" class="md-nav__link">
    8.2 添加时间源
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#83" class="md-nav__link">
    8.3 配置生效
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bond" class="md-nav__link">
    第九章 bond配置
  </a>
  
    <nav class="md-nav" aria-label="第九章 bond配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-bond" class="md-nav__link">
    9.1 bond的模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-bond" class="md-nav__link">
    9.2 配置bond
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lvm" class="md-nav__link">
    第十章 LVM管理
  </a>
  
    <nav class="md-nav" aria-label="第十章 LVM管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101" class="md-nav__link">
    10.1 基础概念
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102-lvm" class="md-nav__link">
    10.2 部署lvm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#103" class="md-nav__link">
    10.3 卷组管理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#104" class="md-nav__link">
    10.4 逻辑卷管理
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raid" class="md-nav__link">
    第十一章 软RAID管理
  </a>
  
    <nav class="md-nav" aria-label="第十一章 软RAID管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-raid" class="md-nav__link">
    11.1 RAID逻辑分类
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-raid10" class="md-nav__link">
    11.2 软RAID10部署
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113-raid" class="md-nav__link">
    11.3 卸载RAID阵列
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    第十二章 分区管理
  </a>
  
    <nav class="md-nav" aria-label="第十二章 分区管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121" class="md-nav__link">
    12.1 磁盘分区基础
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-mbr" class="md-nav__link">
    12.2 创建MBR分区
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123" class="md-nav__link">
    12.3 格式化分区
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#124" class="md-nav__link">
    12.4 挂载/卸载分区
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#125-gpt" class="md-nav__link">
    12.5 创建GPT分区
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#126" class="md-nav__link">
    12.6 调整分区大小
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#127-gpt" class="md-nav__link">
    12.7 删除GPT分区
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/OpenCloudOS/opencloudos.github.io/edit/main/docs/guide/config.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/OpenCloudOS/opencloudos.github.io/raw/main/docs/guide/config.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
    </a>
  


<h1 id="opencloudos-"><center> OpenCloudOS-基础配置</h1>
<h2 id="_1">第一章 初始环境设置</h2>
<p>基础环境配置是安装过程的一部分，下面介绍下如何在安装系统后修改OS层面的基础配置。 基础环境配置包括：</p>
<ul>
<li>时间和日期</li>
<li>系统locale</li>
</ul>
<h3 id="11">1.1 配置时间与日期</h3>
<p>精确的时间在生产系统中至关重要。OpenCloudOS下，通过NTP协议保证时间的准确性。NTP协议是通过用户态一个守护进程实现的，其会更新内核中的系统时钟，而系统时钟可以采用不同的时钟源去维护时间。
<div class="highlight"><pre><span></span><code>[root@VM-6-130-opencloudos /]# date

Tue Aug 2 19:44:17 CST 2022
</code></pre></div></p>
<p>如需查看更多信息，请使用timedatectl命令：
<div class="highlight"><pre><span></span><code>[root@VM-6-130-opencloudos /]# timedatectl

Local time: Tue 2022-08-02 19:46:01 CST

Universal time: Tue 2022-08-02 11:46:01 UTC

RTC time: Tue 2022-08-02 11:46:00

Time zone: Asia/Shanghai (CST, +0800)

System clock synchronized: yes

NTP service: active

RTC in local TZ: no
</code></pre></div></p>
<p><strong>更多帮助：</strong> man date(1) / man timedatectl(1)</p>
<h3 id="12-locale">1.2 配置系统locale</h3>
<p>系统范围内的locale配置于/etc/local/conf文件，在systemd初始启动时会读取该文件。每个服务或者用户都会默认继承这里的配置，当然一些程序和用户也可自定义修改配置。</p>
<p>查看可用的locale设置： localectl list-locales
<div class="highlight"><pre><span></span><code>[root@VM-6-130-opencloudos /]# localectl list-locales

C.utf8

en\_AG

en\_AU

en\_AU.utf8

en\_BW

en\_BW.utf8

...
</code></pre></div></p>
<p>查看当前的系统locale设置
<div class="highlight"><pre><span></span><code>[root@VM-6-130-opencloudos /]# localectl status

System Locale: LANG=en\_US.UTF-8

VC Keymap: us

X11 Layout: us
</code></pre></div></p>
<ul>
<li>更多帮助：man localectl(1) man locale(7) man locale.conf(5)</li>
</ul>
<h2 id="_2">第二章 配置管理网络环境</h2>
<p>本章介绍如何在OpenCloudOS 上配置网络连接，OpenCloudOS默认管理方式为NetworkManager.service，支持NetworkManager的所有配置方式。但是server端管理通过传统ifcfg配置的方式较为方便，这里介绍下ifcfg的配置方式。</p>
<h3 id="21">2.1 静态网络配置</h3>
<p>1.确定配置网卡名字</p>
<p>/proc/net/dev 文件可查看网络设备</p>
<p>2.为eth1配置ip</p>
<p>这里直接采用传统ifcfg配置方式，我们默认仅仅配置ip，不配置dns和gateway</p>
<p>直接编辑文件/etc/sysconfig/network-scripts/ifcfg-eth1
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]# vim /etc/sysconfig/network-scripts/ifcfg-eth1

BOOTPROTO=static 
DEVICE=eth1

ONBOOT=yes

HWADDR=20:90:6F:EC:F4:52 # 网卡mac地址

TYPE=Ethernet

USERCTL=no # 是否允许非root用户控制设备

IPADDR=172.27.16.39 # 网卡ip地址

NETMASK=255.255.255.0 # 子网掩码
</code></pre></div></p>
<p>3.重启网络
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#systemctl restart NetworkManager.service
</code></pre></div></p>
<h3 id="22-dhcp">2.2 DHCP网络配置</h3>
<p>1.确定配置网卡名字</p>
<p>/proc/net/dev 文件可查看网络设备</p>
<p>2.为eth1配置ip</p>
<p>这里直接采用传统ifcfg配置方式，方式为dhcp
<div class="highlight"><pre><span></span><code>BOOTPROTO=dhcp

DEVICE=eth1

HWADDR=20:90:6F:EC:F4:52

ONBOOT=yes

TYPE=Ethernet

USERCTL=no
</code></pre></div></p>
<p>3.重启网络</p>
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#systemctl restart NetworkManager.service
</code></pre></div>
<ul>
<li>更多帮助： man ifcfg</li>
</ul>
<h3 id="23-dns">2.3 自定义DNS</h3>
<p>编辑/etc/resolv.conf
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]# vim /etc/resolv.conf

nameserver 183.60.83.19

nameserver 183.60.82.98
</code></pre></div></p>
<ul>
<li>更多帮助 man(5) resolve.conf</li>
</ul>
<h2 id="systemd">第三章 systemd管理</h2>
<p>通过systemd服务，用户可以使服务以一种优雅的方式实现自动启动。</p>
<h3 id="31">3.1 服务启动设置</h3>
<p>1.服务自动启动
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#systemctl enable service\name
</code></pre></div>
2.服务禁用自动启动
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#systemctl disable service\name
</code></pre></div>
注意：被mask的服务无法enable或者disable，需要先unmask，参考3.2 节。</p>
<h3 id="32">3.2 服务屏蔽</h3>
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#systemctl mask service\_name
[root@OpencloudOS~]#systemctl unmask service\_name
</code></pre></div>
<h3 id="33">3.3 服务日常操作</h3>
<p>1.启动服务
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#systemctl start service_name
</code></pre></div>
2.重启服务
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#systemctl restart service_name
</code></pre></div>
3.查看服务状态
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#systemctl status service_name
</code></pre></div>
- 更多帮助： man systemctl</p>
<h2 id="_3">第四章 账户管理</h2>
<p>OpenCloudOS支持多账户管理，允许多个账户同时登陆一台系统进行操作。账户一般分为普通账户和系统账户。</p>
<ul>
<li>普通账户</li>
</ul>
<p>普通账户一般为特定的系统用户创建，在系统管理过程中可以被增加、删除、修改。主要用作用户登录操作。</p>
<ul>
<li>系统账户</li>
</ul>
<p>系统账户一般用作特定的应用，在应用程序安装时被创建，之后便不在修改</p>
<p>用户ID低于1000 为系统账户预留。高于1000的ID可以用作普通账户，但是比较推荐从5000开始分配普通账户。</p>
<ul>
<li>组</li>
</ul>
<p>一个组可以和多个账户绑定，进行统一的授权操作。</p>
<h3 id="41">4.1 管理账户和组</h3>
<ul>
<li>查看用户和组ID
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]# id

uid=0(root) gid=0(root) groups=0(root)
</code></pre></div></li>
<li>创建用户
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#adduser user_name
</code></pre></div></li>
<li>为用户设置密码
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#passwd user_name
</code></pre></div></li>
<li>把用户加到用户组（如root用户）
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#usermod -g root user_name
</code></pre></div></li>
</ul>
<h2 id="dump-crash">第五章 dump crash内核</h2>
<h3 id="51-kdump">5.1 kdump安装</h3>
<p>kdump是在系统崩溃、死锁或死机时用来转储内存运行参数的一个工具和服务，是一种新的crash dump捕获机制，用来捕获kernel crash（内核崩溃）的时候产生的crash dump。</p>
<p>1.安装kexec-tools
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#yum install kexec-tools
</code></pre></div>
2.更新kexec-tools
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#yum update kexec-tools
</code></pre></div></p>
<h3 id="52">5.2 配置捕获内核大小</h3>
<p>1.编辑配置文件"/etc/default/grub",找到字段"crashkernel=",并根据以下参数配置
<div class="highlight"><pre><span></span><code>crashkernel=1800M-64G:256M，64G-128G:512M,128G-:768M
</code></pre></div>
用户可以根据已安装的内存总量将保留内存量设置为变量。将内存保留到变量的语法是crashkernel=\&lt;range1&gt;:\&lt;size1&gt;，\&lt;range2&gt;:\&lt;size2&gt;。如上图所示。如果系统内存总量在1800MB至64GB之间，则上述示例会保留256MB的内存。</p>
<p>*需要注意的是，首次配置，需要重启预留内存，才能正常使用kdump</p>
<p>2.更新grub2配置文件
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#grub2-mkconfig -o /boot/grub2/grub.cfg
</code></pre></div></p>
<h3 id="53">5.3 配置捕获内核的存放位置</h3>
<p>打开配置文件"/etc/kdump.conf"
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#vim /etc/kdump.conf
</code></pre></div>
默认存放地址为"/var/crash/"</p>
<ul>
<li>使用NFS协议将捕获内核转储到远程计算机</li>
</ul>
<p>将"nfs test.example.com:/export/tmp"前的"#"号删除，然后将地址信息正确配置</p>
<ul>
<li>使用SSH协议将捕获内核转储到远处计算机</li>
</ul>
<p>与上述NFS协议同理，将"ssh test.example.com"前的"#"号删除，然后将地址信息正确配置</p>
<h3 id="54">5.4 触发内核崩溃</h3>
<p>强制触发内核崩溃，测试kdump是否正常工作
<div class="highlight"><pre><span></span><code>[root@OpencloudOS~]#echo c &gt; /proc/sysrq-trigger
</code></pre></div></p>
<h3 id="55-vmcore">5.5 分析vmcore</h3>
<p>在进行捕获内核分析前，需要准备:</p>
<ul>
<li>vmlinux调试镜像</li>
</ul>
<p>该文件一般位于"/boot/"目录下对应的内核版本，文件命名格式如：</p>
<p>vmlinux-5.4.109-x-xx-xxx</p>
<p>若该目录下没有对应的调试镜像，则可在以下链接中下载对应内核版本的kernel-debuginfo工具包</p>
<p>http://mirrors.tencent.com/opencloudos/8.5/BaseOS/x86_64/debug/tree/Packages/
并使用如下命令进行安装，成功安装后在/boot/会生成对应的vmlinux镜像</p>
<p>并使用如下命令进行安装，成功安装后在/boot/会生成对应的vmlinux镜像
<div class="highlight"><pre><span></span><code>#rpm -ivh kernel-xxx-debuginfo-common-xxxx.rpm#rpm -ivh kernel-xxx-debuginfo-common-xxxx.rpm
</code></pre></div>
- vmcore文件</p>
<p>在对应的目录（默认为/var/crash/）中找到vmcore文件</p>
<p>开始运行crash程序分析vmcore</p>
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]# ls /var/crash/127.0.0.1-2022-08-19-02\:34\:00/
kexec-dmesg.log  vmcore  vmcore-dmesg.txt

crash\&gt; q //退出crash

crash\&gt; log //显示消息缓存区

crash\&gt; bt //显示内核崩溃前的函数调用栈

crash\&gt; ps //显示内核崩溃前的进程状态

crash\&gt; vm //显示内核崩溃前的虚拟内存信息

crash\&gt; files //显示内核崩溃前的文件句柄信息
</code></pre></div>
<h2 id="_4">第六章 日志分析</h2>
<p>内核及系统日志由系统服务rsyslog统一管理，根据其主配置文件/etc/rsyslog.conf中的设置决定将内核消息及各种系统程序消息记录到什么位置。</p>
<p>常用的系统日志文件如下表所示：</p>
<table>
<thead>
<tr>
<th>路径</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>/var/log/messages</td>
<td>记录内核及各种应用程序的公共日志信息</td>
</tr>
<tr>
<td>/var/log/cron</td>
<td>记录crond计划任务产生的事件信息</td>
</tr>
<tr>
<td>/var/log/dmesg</td>
<td>记录操作系统在引导过程中的各种事件信息</td>
</tr>
<tr>
<td>/var/log/mailog</td>
<td>记录进入或发出系统的电子邮件活动</td>
</tr>
<tr>
<td>/var/log/boot.log</td>
<td>系统启动时日志，包括自启动服务</td>
</tr>
<tr>
<td>/var/log/yum.log</td>
<td>包含yum安装软件包的信息</td>
</tr>
<tr>
<td>/var/log/audit/</td>
<td>包含audit daemon的审计日志</td>
</tr>
<tr>
<td>/var/log/sa/</td>
<td>包含每日由sysstat软件包收集的sar文件</td>
</tr>
</tbody>
</table>
<ul>
<li>用户日志</li>
</ul>
<p>用户日志用于记录操作系统用户登录及退出系统的相关信息，包括用户名、登录的终端、登录时间、来源主机、正在使用的进程操作等。</p>
<p>常用的用户日志目录：</p>
<table>
<thead>
<tr>
<th>路径</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>/var/log/lastlog</td>
<td>记录每个用户最近的登录事件</td>
</tr>
<tr>
<td>/var/log/secure</td>
<td>记录用户认证相关的安全事件信息</td>
</tr>
<tr>
<td>/var/log/wtmp</td>
<td>记录每个用户登录、注销及系统启动和停机时间</td>
</tr>
<tr>
<td>/var/log/btmp</td>
<td>记录失败的、错误的登录尝试及验证事件</td>
</tr>
</tbody>
</table>
<p>查看日志方法：
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]#cat /var/log/xxx
</code></pre></div>
其中xxx表示日志类型，如cat /var/log/lastlog</p>
<ul>
<li>程序日志</li>
</ul>
<p>通常应用程序会自己维护一份日志文件，用于记录本程序运行过程中的各种事件信息，由于各程序的日志管理和规则独立，导致不同程序所使用的日志记录格式存在较大差异。</p>
<ul>
<li>服务日志</li>
</ul>
<p>可以通过Journal处理由内核、initrd以及服务等产生的信息。通过journalctl工具，访问并操作journal内部的数据。如查看服务最新信息
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]#journalctl -xe -u &quot;service&quot;
</code></pre></div></p>
<h2 id="systemd_1">第七章 systemd机制</h2>
<p>systemd是OpenCloudOS系统上主要的系统守护进程管理工具，由于init一方面对于进程的管理是串行化的，容易出现阻塞情况，另一方面init也仅仅是执行启动脚本，并不能对服务本身进行更多的管理,所以由systemd取代了init作为默认的系统进程管理工具。</p>
<p>systemd所管理的所有系统资源都称作Unit，通过systemd命令集可以方便的对这些Unit进行管理。比如systemctl、hostnamectl、timedatectl、localctl等命令。</p>
<p>systemd的语法如下所示：</p>
<table>
<thead>
<tr>
<th>systemctl [command]</th>
<th>[unit]（配置的应用名称,以nginx为例）</th>
</tr>
</thead>
<tbody>
<tr>
<td>command可选项：</td>
<td></td>
</tr>
<tr>
<td>start：启动指定的unit</td>
<td>systemctl start nginx·</td>
</tr>
<tr>
<td>stop：关闭指定的unit</td>
<td>systemctl stop nginx</td>
</tr>
<tr>
<td>restart：重启指定unit</td>
<td>systemctl restart nginx</td>
</tr>
<tr>
<td>reload：重载指定unit</td>
<td>systemctl reload nginx</td>
</tr>
<tr>
<td>enable：系统开机时自动启动指定unit，前提是配置文件中有相关配置</td>
<td>systemctl enable nginx</td>
</tr>
<tr>
<td>disable：开机时不自动运行指定unit</td>
<td>systemctl disable nginx</td>
</tr>
<tr>
<td>status：查看指定unit当前运行状态</td>
<td>systemctl status nginx</td>
</tr>
</tbody>
</table>
<p><strong>systemd</strong>  <strong>配置文件说明</strong></p>
<p>每一个 Unit 都需要有一个配置文件用于告知 systemd 对于服务的管理方式</p>
<p>1.配置文件存放于 /usr/lib/systemd/system/，设置开机启动后会在 /etc/systemd/system 目录建立软链接文件
2.每个Unit的配置文件配置默认后缀名为.service
3.在 /usr/lib/systemd/system/ 目录中分为 system 和 user 两个目录，一般将开机不登陆就能运行的程序存在系统服务里，也就是 /usr/lib/systemd/system
4.配置文件使用方括号分成了多个部分，并且区分大小写
<br /></p>
<h2 id="chrony">第八章 chrony机制</h2>
<p>chrony 是网络时间协议 (NTP) 的通用实现。它可以将系统时钟与 NTP 服务器、参考时钟（例如 GPS 接收器）同步。它还可以作为 NTPv4 (RFC 5905) 服务器和对等点运行，为网络中的其他计算机提供时间服务。chronyd 是一个可以在引导时启动的守护程序。</p>
<h3 id="81">8.1 安装配置</h3>
<p>1.安装chrony
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]#yum install chrony
</code></pre></div>
2.启动chrony
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]#systemctl start chronyd

[root@VM-6-140-opencloudos /]#systemctl enable chronyd
</code></pre></div></p>
<p>3.查看chrony状态</p>
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]#systemctl status chronyd
</code></pre></div>
<h3 id="82">8.2 添加时间源</h3>
<p>1.打开配置文件
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]#vim /etc/chrony.conf
</code></pre></div>
2.添加时间源参数</p>
<p>在/etc/chrony.conf配置文件中添加以下参数：
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]#server time.tencentyun.com iburst
</code></pre></div>
3.查看时间同步源状态
<div class="highlight"><pre><span></span><code>[root@VM-6-130-opencloudos ~]# chronyc sources -v

^+ 169.254.0.79 2 10 377 688 +149us[+281us] +/- 24ms

^\* 169.254.0.80 2 10 377 29 -380us[-245us] +/- 39ms

^+ 169.254.0.81 2 10 377 691 +31us[+162us] +/- 27ms

^+ 169.254.0.82 2 10 377 613 +158us[+290us] +/- 28ms

^+ 169.254.0.83 2 10 377 767 +168us[+299us] +/- 37ms
</code></pre></div></p>
<h3 id="83">8.3 配置生效</h3>
<p>重启chrony，使配置生效
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]#systemctl restart chronyd
</code></pre></div></p>
<p>查看时间同步源状态
<div class="highlight"><pre><span></span><code>[root@VM-6-130-opencloudos ~]# chronyc sourcestats -v

169.254.0.79 6 3 86m +0.081 0.289 +191us 178us

169.254.0.80 24 14 396m -0.015 0.017 -235us 156us

169.254.0.81 6 3 86m +0.044 0.257 +62us 140us

169.254.0.82 6 3 86m -0.062 0.420 -118us 142us

169.254.0.83 9 8 137m +0.031 0.035 +165us 47us
</code></pre></div></p>
<h2 id="bond">第九章 bond配置</h2>
<p>bond技术是将多块物理网卡绑定同一IP地址对外提供服务，通过不同的模式配置，从而达到高可用、负载均衡及链路冗余等效果。</p>
<h3 id="91-bond">9.1 bond的模式</h3>
<p>bond具有7种模式，如下表所示</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>mode 0</td>
<td>load balancing (round-robin)模式，多张网卡同时工作</td>
</tr>
<tr>
<td>mode 1</td>
<td>fault-tolerance (active-backup)提供冗余功能，工作方式是主备的工作方式</td>
</tr>
<tr>
<td>mode 2</td>
<td>balance-x，提供负载均衡和冗余功能</td>
</tr>
<tr>
<td>mode 3</td>
<td>表示broadcast，该模式提供容错性</td>
</tr>
<tr>
<td>mode 4</td>
<td>表示802.3ad，表示支持802.3ad协议，和交换机的聚合LACP方式配合(需要xmit_hash_policy)</td>
</tr>
<tr>
<td>mode 5</td>
<td>表示balance-tlb，自动适应负载均衡，自动切换故障。在此基础上Ethtool支持驱动</td>
</tr>
<tr>
<td>mode 6</td>
<td>表示在5模式的基础上优化了arp的广播信息</td>
</tr>
</tbody>
</table>
<p>其中以mode4为常用模式</p>
<h3 id="92-bond">9.2 配置bond</h3>
<p>1.选择2块需要绑定的网卡进行配置。例：eth0/eth1，则eth0在/etc/sysconfig/network-scripts/目录下的配置文件ifcfg-eth0的参数表示如下：
<div class="highlight"><pre><span></span><code>[root@VM-6-130-opencloudos ~]# /etc/sysconfig/network-scripts/ifcfg-eth0
DEVICE=eth0 #网口名：eth0

NAME=eth0

TYPE=Ethernet #网口类型：以太网接口

ONBOOT=yes #系统启动时网口状态为激活

BOOTPROTO=none #网口激活协议：nono不适用任何协议 static：设置静态ip dhcp：设置动态获取ip

MASTER=bond\_test #指定虚拟网口的名字

SLAVE=yes #备用（从设备）
</code></pre></div></p>
<p>2.eth1在/etc/sysconfig/network-scripts/目录下的配置文件ifcfg-eth1的参数表示如下：
<div class="highlight"><pre><span></span><code>[root@VM-6-130-opencloudos ~]# /etc/sysconfig/network-scripts/ifcfg-eth1
DEVICE=eth1 #网口名：eth1

NAME=eth1

TYPE=Ethernet #网口类型：以太网接口

ONBOOT=yes #系统启动时网口状态为激活

BOOTPROTO=none #网口激活协议：nono不适用任何协议 static：设置静态ip dhcp：设置动态获取ip

MASTER=bond\_test #指定虚拟网口的名字

SLAVE=yes #备用（从设备）
</code></pre></div></p>
<p>3.在/etc/sysconfig/network-scripts/ifcfg-bond_test目录下配置bond_test网卡
<div class="highlight"><pre><span></span><code>[root@VM-6-130-opencloudos ~]# /etc/sysconfig/network-scripts/ifcfg-bond_test

DEVICE=bond\_test #网口名：bond\_test

NAME=bond\_test

TYPE=Ethernet #网口类型：以太网接口

ONBOOT=yes #系统启动时网口状态为激活

DELAY=0

NM\_CONTROLLED=yes

BOOTPROTO=static #网口激活协议：nono不适用任何协议 static：设置静态ip dhcp：设置动态获取ip

IPADDR=&#39;9.27.148.124&#39; #ip地址

NETMASK=&#39;255.255.255.192&#39; #子网掩码

GATEWAY=&#39;9.27.148.65&#39; #网关

BONDING\_OPTS=&#39;mode=4 miimon=100 lacp\_rate=fast xmit\_hash\_policy=1&#39;
</code></pre></div></p>
<p>其中miimon表示链路监测：miimon=100表示系统每100ms监测一次链路状态，如果有一条线路不通就转入另一条线路</p>
<p>4.配置bonding
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]#vim /etc/modprobe.d/dist.conf
alias bond\_test bonding
</code></pre></div>
5.查看当前使用网口
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]#cat /proc/net/bonding/bond_test
</code></pre></div>
<br /></p>
<h2 id="lvm">第十章 LVM管理</h2>
<p>LVM（Logical Volume Manager）逻辑卷管理，是在硬盘分区和文件系统之间添加的一个逻辑层，为文件系统屏蔽下层硬盘分区布局，并提供一个抽象的盘卷，在盘卷上建立文件系统。系统管理员利用LVM可以在硬盘不用重新分区的情况下动态调整文件系统的大小，并且利用LVM管理的文件系统可以跨越物理硬盘。当服务器添加了新的硬盘后，管理员不必将原有的文件移动到新的硬盘上，而是通过LVM直接扩展文件系统来跨越物理硬盘。</p>
<h3 id="101">10.1 基础概念</h3>
<p>物理卷(PV)：把常规的块设备（硬盘，分区等可以读写数据的设备）通过pvcreate命令对其进行初始化，形成物理卷</p>
<p>卷组(VG):把多个物理卷的容量组成一个逻辑整体，可以从里面灵活分配容量</p>
<p>逻辑卷(LV):从卷组中划分部分空间成为一个可以读写数据的逻辑单元，需要对其格式化然后挂载使用</p>
<h3 id="102-lvm">10.2 部署lvm</h3>
<p>1.添加物理磁盘，创建物理卷
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]# lsblk | grep &quot;vd[bcd]&quot;

vdb 253:0 0 50G 0 disk

vdc 253:16 0 50G 0 disk

vdd 253:32 0 50G 0 disk
</code></pre></div>
2.将磁盘加入pv</p>
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]# pvcreate /dev/vdb

Physical volume &quot;/dev/sdb&quot; successfully created.//检查pv创建情况

[root@VM-16-5-opencloudos ~]# pvs

PV VG Fmt Attr PSize PFree

/dev/vdb lvm2 --- 50.00g 50.00g
</code></pre></div>
<p>3.创建名为datavg的卷组</p>
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]# vgcreate datavg /dev/vdb

Volume group &quot;datavg&quot; successfully created

[root@VM-16-5-opencloudos ~]# vgs

VG #PV #LV #SN Attr VSize VFree

datavg 1 0 0 wz--n- \&lt;50.00g \&lt;50.00g
</code></pre></div>
<p>4.创建逻辑卷，分配名称，以及大小，指定卷组</p>
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]# lvcreate -L 100M -n lv1 datavg

Wiping ext4 signature on /dev/datavg/lv1.

Logical volume &quot;lv1&quot; created.

[root@VM-16-5-opencloudos ~]# lvscan

ACTIVE &#39;/dev/datavg/lv1&#39; [100.00 MiB] inherit
</code></pre></div>
<p>5.格式化文件系统</p>
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]# mkfs.ext4 /dev/datavg/lv1

Allocating group tables: done

Writing inode tables: done

Creating journal (4096 blocks): done

Writing superblocks and filesystem accounting information: done
</code></pre></div>
<p>6.挂载并使用</p>
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#mkdir /lv1

[root@VM-16-5-opencloudos ~]#mount /dev/datavg/lv1 /lv1/

[root@VM-16-5-opencloudos ~]#df -hl

Filesystem Size Used Avail Use% Mounted on

/dev/mapper/datavg-lv1 93M 1.6M 85M 2% /lv1
</code></pre></div>
<h3 id="103">10.3 卷组管理</h3>
<ul>
<li>扩展卷组，将新磁盘加入卷组</li>
</ul>
<p>1.新磁盘加入pv
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]#pvcreate /dev/vdc
</code></pre></div>
2.使用vgextend扩展
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]#vgextend datavg /dev/vdc
</code></pre></div></p>
<ul>
<li>缩减卷组
<div class="highlight"><pre><span></span><code>[root@VM-6-140-opencloudos /]#vgreduce datavg /dev/vdb
</code></pre></div></li>
<li>数据迁移卷组</li>
</ul>
<p>只有同一卷组的磁盘才能够进行在线迁移</p>
<p>1.检查当前逻辑卷VG中PV使用情况
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#pvs

PV VG Fmt Attr PSize PFree

/dev/vdb vg1 lvm2 a -- 2.00g 1.76g

/dev/vdc vg1 lvm2 a -- 2.00g 2.00g
</code></pre></div></p>
<p>2.pvmove在线将/dev/vdb数据迁移至/dev/vdc</p>
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#pvmove /dev/vdb /dev/vdc
</code></pre></div>
<p>3.查看是否迁移成功
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#pvs

/dev/vdb vg1 lvm2 a -- 2.00g 2.00g

/dev/vdc vg1 lvm2 a -- 2.00g 1.76g
</code></pre></div>
- 删除卷组
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#vgremove vgname
</code></pre></div>
删除卷组之前请确保卷组内的逻辑卷未被挂载</p>
<h3 id="104">10.4 逻辑卷管理</h3>
<ul>
<li>逻辑卷扩展</li>
</ul>
<p>逻辑卷的扩展取决于卷组中的容量，逻辑卷扩展的容量不能超过卷组的容量</p>
<p>1.为逻辑卷增加1G容量
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#lvextend -L +1G /dev/datavg/lv1 (注意：1G与+1G意义不同)
</code></pre></div>
2.扩展文件系统</p>
<p>xfs_growfs /dev/datavg/lv1 //xfs文件系统扩容</p>
<p>resize2fs /dev/datavg/lv1//ext文件系统扩容</p>
<ul>
<li>对ext格式的逻辑卷裁剪容量</li>
</ul>
<p>以裁剪逻辑卷512M容量为例，操作步骤如下：</p>
<p>1.首先创建一个1G的逻辑卷作为被裁剪的对象
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#lvcreate -n rm_test -L 1G datavg //datavg为卷组

[root@VM-16-5-opencloudos ~]#mkfs.ext4 /dev/datavg/rm_test

[root@VM-16-5-opencloudos ~]#mkdir -p /rm_test

[root@VM-16-5-opencloudos ~]#mount /dev/datavg/rm_test /rm_test/
</code></pre></div>
2.如果已经挂载，必须先卸载
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#umount /dev/datavg/rm_test
</code></pre></div>
3.裁剪容量，必须先检测文件系统
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#e2fsck -f /dev/datavg/rm_test

[root@VM-16-5-opencloudos ~]#resize2fs /dev/datavg/rm_test 512M
</code></pre></div>
4.调整完毕后，裁剪逻辑卷容量
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#lvreduce -L 512M /dev/datavg/rm_test
</code></pre></div>
5.挂载测试，若能成功挂载，则文件系统未被损坏
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#mount /dev/datavg/rm_test
</code></pre></div>
- 删除逻辑卷</p>
<p>1.确保被删除的逻辑卷未使用</p>
<p><div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#umount /dev/datavg/rm_test # umount /dev/卷组名/逻辑卷名
</code></pre></div>
2.删除逻辑卷</p>
<ul>
<li>lvremove <volume_group>/<logical_volume>
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#lvremove /dev/datavg/rm_test
</code></pre></div></li>
</ul>
<h2 id="raid">第十一章 软RAID管理</h2>
<p>RAID(redundant array of independent disks)磁盘冗余阵列，通过把多个硬盘设备组合成一个容量更大、安全性更好的磁盘阵列，并把数据切割成多个段后分别存放在各个不同的物理硬盘设备上，然后利用分散读写技术来提升磁盘阵列整体的性能，同时把多个重要数据的副本同步到不同的物理硬盘设备上，从而起到了非常好的数据冗余备份效果和容错能力。</p>
<p>RAID根据硬件的使用与否分为软RAID和硬RAID</p>
<p>软RAID：无独立的RAID控制卡，由操作系统和CPU来实现所有的RAID功能</p>
<h3 id="111-raid">11.1 RAID逻辑分类</h3>
<ul>
<li>RAID0</li>
</ul>
<p>数据条带化，无校验，不提供数据保护。数据并发写入多个硬盘。</p>
<p>优点：1.所有RAID中读写性能最高。2.100%的磁盘空间利用率</p>
<p>缺点：不提供数据冗余保护，一旦数据损坏，将无法恢复。</p>
<p>使用场景：RAID 0适用于迅速读写，但对数据安全性和可靠性要求不高的场景，如视频、打印等。</p>
<ul>
<li>RAID1</li>
</ul>
<p>数据镜像，无校验。一半的空间存储冗余数据，所有RAID中数据安全性最高。</p>
<p>优点：1.所有的RAID中安全性最高，即使有一半的磁盘发生故障，仍能正常运转。2.镜像磁盘没有全部故障，数据就不会丢失。</p>
<p>缺点：1.磁盘空间利用率为50%，一半的空间用于存储冗余数据。2.成本高。</p>
<ul>
<li>RAID5</li>
</ul>
<p>数据条带化，校验数据（1组）均匀分布在每个物理磁盘上。当某个物理磁盘发生故障时，可根据同一条带的其他数据块和对应的校验数据来重建损坏的数据。</p>
<p>优点：1.允许1个物理磁盘发生故障，而不丢失数据。2.读取性能相对高，磁盘空间利用率大于RAID 10。</p>
<p>缺点：1.写入性能相对低。2.重建数据时，性能会受到较大的影响。</p>
<ul>
<li>RAID10</li>
</ul>
<p>RAID 1与RAID 0的结合，从磁盘的角度看，先将四块磁盘两两分组形成两组镜像对，组内先使用RAID1模式用于数据备份，组间使用RAID0进行数据拆分，提高读写速率。相对于RAID0，RAID1使用更多的磁盘。</p>
<p>优点：1.读取性能仅次于RAID 0。2.镜像对中的磁盘没有全部故障，数据就不会丢失。3.一半的物理磁盘发生故障时，仍可正常运转。</p>
<p>缺点：1.成本高。2.磁盘空间利用率50%，一半的空间用于存储冗余数据。</p>
<ul>
<li>RAID6</li>
</ul>
<p>数据条带化，校验数据（2组）均匀分布在每个物理磁盘上。即使有两个磁盘同时故障，也可通过2组校验数据来重建两个磁盘上损坏的数据。</p>
<p>优点：1.允许2个物理磁盘发生故障，而不丢失数据。2.读取性能较高，磁盘空间利用率大于RAID 10。</p>
<p>缺点：成本高于RAID 5，写入性能较低（低于RAID 5）。</p>
<ul>
<li>RAID50</li>
</ul>
<p>RAID 5与RAID 0的结合，先创建RAID 5，再创建RAID 0。有效提升了RAID 5的性能。将作为组成部分的磁盘划分为若干完全相同的RAID 5。配置RAID 50至少需要6个磁盘，划分为2个RAID 5，每组有3个磁盘。</p>
<p>优点：1.读写性能高于RAID 5。2.容错能力高于RAID 0或RAID 5。3.发生故障的磁盘在不同的RAID 5中，最多允许n个物理磁盘发生故障（n为RAID 5的数量）而不丢失数据。</p>
<p>缺点：1.重建故障磁盘时，如果同一RAID 5中又有磁盘发生故障，则会丢失所有数据。2.磁盘中需要更多的空间存储校验数据。</p>
<ul>
<li>RAID60</li>
</ul>
<p>RAID 6与RAID 0的结合，先创建RAID 6，再创建RAID 0。有效提升了RAID6的性能。将作为组成部分的磁盘划分为若干完全相同的RAID 6。配置RAID 60 至少需要8个磁盘，划分为两个RAID 6，每组有4个磁盘。</p>
<p>优点：1.读写性能高于RAID 6。2.容错能力高于RAID 0或RAID 6。3.同一RAID 6中发生故障的磁盘不超过两个，最多可允许2n个物理磁盘发生故障（n为RAID 6的数量）而不丢失数据。</p>
<p>缺点：1.重建故障磁盘时，如果同一RAID 6中又有第三个磁盘发生故障，则会丢失所有数据。2.磁盘中需要更多的空间存储校验数据。</p>
<p>RAID模式的选择如下表所示：</p>
<table>
<thead>
<tr>
<th>RAID级别</th>
<th>容错性</th>
<th>硬盘数</th>
<th>可用容量</th>
<th>允许故障硬盘数</th>
<th>使用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>RAID 0</td>
<td>无</td>
<td>N&gt;=2</td>
<td>全部</td>
<td>0</td>
<td>高读写，无保护</td>
</tr>
<tr>
<td>RAID 1</td>
<td>有</td>
<td>N&gt;=2且N%2=0</td>
<td>一半</td>
<td>一半</td>
<td>读写速率不变，高数据保护</td>
</tr>
<tr>
<td>RAID 5</td>
<td>有</td>
<td>N&gt;=3</td>
<td>（N-1）*单块磁盘容量</td>
<td>1</td>
<td>随机数据传输，安全要求高</td>
</tr>
<tr>
<td>RAID 6</td>
<td>有</td>
<td>N&gt;=4</td>
<td>（N-2）*单块磁盘容量</td>
<td>2</td>
<td>使用较少</td>
</tr>
<tr>
<td>RAID 10</td>
<td>有</td>
<td>N&gt;=4且N%2=0</td>
<td>一半</td>
<td>一半</td>
<td>高读写，高保护</td>
</tr>
<tr>
<td>RAID 50</td>
<td>有</td>
<td>N&gt;=6</td>
<td>每个RAID5中有1块磁盘用于存储校验数据</td>
<td>每个RAID5允许1块磁盘故障</td>
<td>使用较少</td>
</tr>
<tr>
<td>RAID 60</td>
<td>有</td>
<td>N&gt;=8</td>
<td>每个RAID6中有2块磁盘用于存储校验数据</td>
<td>每个RAID6允许2块磁盘故障</td>
<td>使用较少</td>
</tr>
</tbody>
</table>
<h3 id="112-raid10">11.2 软RAID10部署</h3>
<p>Linux内核中有一个md(multiple devices)模块在底层管理RAID设备，它会在应用层为用户提供一个应用程序的工具mdadm ，mdadm是linux下用于创建和管理软件RAID的命令。</p>
<p>本文档将磁盘/dev/vdb/分四个分区作为四个磁盘搭建软RAID10；</p>
<p>1.创建raid10
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#mdadm -C -v /dev/md10 -l 10 -n 4 /dev/vdb[1-4]

mdadm: layout defaults to n2

mdadm: layout defaults to n2

mdadm: chunk size defaults to 512K

mdadm: size set to 5237760K

mdadm: Defaulting to version 1.2 metadata

mdadm: array /dev/md10 started.
</code></pre></div></p>
<p>参数说明：</p>
<p>-C 创建</p>
<p>-v 可视化</p>
<p>-l 指定RAID级别</p>
<p>-n 指定设备数量</p>
<p>2.查看保存配置
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#mdadm -D /dev/md10

[root@VM-16-5-opencloudos ~]#mdadm -Dsv \&gt; /etc/mdadm.conf
</code></pre></div>
3.查看阵列信息
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#cat /proc/mdstat
</code></pre></div>
4.将md10作为一个整体磁盘，格式化并挂载
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#mkfs.ext4 /dev/md10

[root@VM-16-5-opencloudos ~]#mount -t ext4 /dev/md10 /mnt/
</code></pre></div>
至此，磁盘阵列已可用</p>
<h3 id="113-raid">11.3 卸载RAID阵列</h3>
<p>以上述11.2节创建的RAID为例，执行以下命令卸载磁盘阵列
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#umount /dev/md10

[root@VM-16-5-opencloudos ~]#mdadm -S /dev/md10

[root@VM-16-5-opencloudos ~]#mdadm --misc --zero-superblock /dev/vdb[1-4]
</code></pre></div></p>
<h2 id="_5">第十二章 分区管理</h2>
<h3 id="121">12.1 磁盘分区基础</h3>
<ul>
<li>基本分区（primary partion）</li>
</ul>
<p>基本分区也称主分区，引导分区、每块磁盘分区主分区与扩展分区加起来不能大于四个。</p>
<p>基本分区创建后可以立即使用，但是有分区数量上限。</p>
<ul>
<li>扩充分区(extension partion)</li>
</ul>
<p>每块磁盘内只能划分一块扩展分区，扩展分区内可划分任意块逻辑分区</p>
<p>扩展分区创建后不能直接使用，需要在扩展分区内创建逻辑分区</p>
<ul>
<li>逻辑分区（logical partion）</li>
</ul>
<p>逻辑分区是在扩展分区内创建的分区</p>
<p>逻辑分区相当于一块存储介质，和其他逻辑分区主分区完全独立</p>
<p>磁盘分区主要借助fdisk -l工具</p>
<h3 id="122-mbr">12.2 创建MBR分区</h3>
<p>选择一块需要分区的磁盘，以/dev/vdb/为例，使用fdisk工具创建新分区
<div class="highlight"><pre><span></span><code>[root@VM-6-130-opencloudos /]# fdisk /dev/vdb

Command (m for help): n //创建一个新的分区

Partition type

p primary (0 primary, 0 extended, 4 free)

e extended (container for logical partitions)

Select (default p): p //选择分区类型，以主分区为例

Partition number (1-4, default 1):1 //选择分区号

First sector (2048-104857599, default 2048): 2048 //扇区起始地址

Last sector, +sectors or +size{K,M,G,T,P} (2048-104857599, default 104857599):+5G //指定扇区容量

Created a new partition 1 of type &#39;Linux&#39; and of size 5 GiB.

Command (m for help): wq //保存修改并退出
</code></pre></div>
至此，成功创建新分区！</p>
<p>其他操作参数如下：</p>
<table>
<thead>
<tr>
<th>fdisk     -l</th>
<th>查看，列出磁盘信息</th>
</tr>
</thead>
<tbody>
<tr>
<td>fdisk    /dev/vdb</td>
<td>进行操作</td>
</tr>
<tr>
<td>p</td>
<td>列出磁盘现有分区情况，分区类型为主分区</td>
</tr>
<tr>
<td>e</td>
<td>分区类型为扩展分区</td>
</tr>
<tr>
<td>n</td>
<td>添加新的磁盘分区</td>
</tr>
<tr>
<td>d</td>
<td>删除现有磁盘分区</td>
</tr>
<tr>
<td>w</td>
<td>对分区操作进行保存</td>
</tr>
<tr>
<td>q</td>
<td>放弃更改退出</td>
</tr>
<tr>
<td>t</td>
<td>改变分区的id，即修改分区功能id</td>
</tr>
<tr>
<td>l</td>
<td>列出已有分区类型</td>
</tr>
</tbody>
</table>
<h3 id="123">12.3 格式化分区</h3>
<p>需要将新创建的分区格式化对应的文件系统,以ext4格式为例
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#mkfs.ext4 /dev/vdb1
</code></pre></div></p>
<h3 id="124">12.4 挂载/卸载分区</h3>
<p>需要将格式化后的分区挂载到指定目录后方可使用，如将分区挂载到/mnt/分区下
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#mount -t ext4 /dev/vdb1
</code></pre></div>
分区不用后可以将该分区卸载
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#umount /dev/vdb1
</code></pre></div></p>
<h3 id="125-gpt">12.5 创建GPT分区</h3>
<p>fdisk 命令用于创建和维护磁盘分区，而且fdisk只能对小于2TB的硬盘进行分区，对于大于2TB的硬盘，需要使用parted工具分区，使用fdisk创建分区，只能创建MBR分区方案。</p>
<p>1.进入parted交互模式</p>
<p><div class="highlight"><pre><span></span><code>[root@VM-6-130-opencloudos /]# parted

(parted) select /dev/vdb //选择磁盘/dev/vdb

(parted) print free //查看磁盘信息
</code></pre></div>
2.创建一个新分区
<div class="highlight"><pre><span></span><code>(parted) mkpart

Partition type? primary/extended? primary

File system type? [ext2]? ext4

Start? 1

End? 5G

(parted)quit
</code></pre></div></p>
<p>3.将磁盘格式化为GPT磁盘
<div class="highlight"><pre><span></span><code>(parted) mklabel gpt
</code></pre></div></p>
<h3 id="126">12.6 调整分区大小</h3>
<p>parted可以调整分区的大小，注意，parted 调整已经挂载使用的分区时，不会影响分区中的数据的。但是一定要先卸载分区，再调整分区大小，否则数据会出现问题。另外，要调整大小的分区必须已经建立了文件系统（格式化），否则会报错。</p>
<p>以调整/dev/vdb1分区的大小为例</p>
<p>1.卸载该分区
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#umount /dev/vdb1
</code></pre></div>
2.进入parted交互模式</p>
<p>执行以下命令
<div class="highlight"><pre><span></span><code>[root@VM-6-130-opencloudos /]# parted /dev/vdb

(parted) resizepart

Partition number? 1

End? 10G

(parted) quit
</code></pre></div></p>
<h3 id="127-gpt">12.7 删除GPT分区</h3>
<p>1.卸载该分区
<div class="highlight"><pre><span></span><code>[root@VM-16-5-opencloudos ~]#umount /dev/vdb1
</code></pre></div>
2.进入parted交互模式</p>
<p>执行以下命令
<div class="highlight"><pre><span></span><code>[root@VM-6-130-opencloudos /]# parted /dev/vdb

(parted) rm

Partition number? 1

(parted) quit
</code></pre></div>
要注意的是，parted 中所有的操作都是立即生效的，没有保存生效的概念。这一点和 fdisk 交互命令明显不同，所以所有操作要加倍小心。å</p>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.action.edit", "content.action.view", "content.code.annotate", "content.tooltips", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>