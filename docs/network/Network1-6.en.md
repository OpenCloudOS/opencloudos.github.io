# Chapter 1 NIC interface naming convention

In order to facilitate finding and distinguishing network interfaces and ensure the consistency and visibility of network interfaces, OpenCloudOS provides a naming convention for network interfaces.

Network interface names consist of a fixed prefix and a serial number generated by the kernel to initialize the network device. For example, eth0 represents the first network device detected by the system at boot time, but these names do not necessarily correspond to the label names on the host's shell. Ambiguous interface naming may be encountered on servers with multiple network adapters, which affects embedded network adapters and additional adapters in the system.

In OpenCloudOS, the udev device manager supports various naming schemes. By default, udev assigns names to devices based on firmware, topology and location information, which has several advantages:

- Device names are fully predictable.
- Adding or removing hardware will not change the device name as the serial number will not be regenerated.
- Facilitates replacement of faulty hardware.

## 1.1 Network interface device naming scheme

Following is the udev device manager default device naming scheme:

| Scenario | Description                                                  | Example         |
| -------- | ------------------------------------------------------------ | --------------- |
| 1        | The device name contains the BIOS index number or firmware, applicable to the device on the motherboard. When this scheme is not applicable, udev will use scheme 2. | eno1            |
| 2        | The device name contains the PCIe hot-plug slot index number provided by the firmware or BIOS. When this scheme is not applicable, udev will use scheme 3. | ens1            |
| 3        | The device name contains the physical location of the hardware connector. When this scheme is not applicable, udev will use scheme 5. | enp2s0          |
| 4        | The device name contains the MAC address. OpenCloudOS does not use this scheme by default, but administrators can choose to use it. | enx00ff2420b540 |
| 5        | Legacy unforeseen kernel naming schemes. The device manager uses this scheme if udev cannot apply any other scheme. | eth0            |

By default, OpenCloudOS chooses the device name according to the NamePolicy setting in the /usr/lib/systemd/network/99-default.link file. The order of the values in the NamePolicy is important. OpenCloudOS uses the first device name specified in the file and generated by udev.

If you manually configure udev rules to change kernel device names, those rules take precedence.

## 1.2. Working method of network device renaming

By default, OpenCloudOS enables the same device naming rules. The udev device manager renames devices according to different schemes. The following list describes the order in which udev handles these scenarios, and the actions these rules are responsible for:

1. The /usr/lib/udev/rules.d/60-net.rules file defines the /lib/udev/rename_device helper tool to search the /etc/sysconfig/network-scripts/ifcfg-* files for the HWADDR parameter. When the NIC MAC address matches the value set by the variable, the helper tool renames the NIC interface to the name in the DEVICE parameter of the file.

2. The /usr/lib/udev/rules.d/71-biosdevname.rules file defines the biosdevname tool to rename the interface according to its naming policy if the device was not renamed in the previous step.

3. The /usr/lib/udev/rules.d/75-net-description.rules file defines what udev checks for network interface devices and sets properties in the udev-internal variable that will be processed in the next step. Note that some of these properties may not be defined.

4. The /usr/lib/udev/rules.d/80-net-setup-link.rules file calls the built-in net_setup_link udev and then applies the renaming scheme. The following are the default policies stored in the /usr/lib/systemd/network/99-default.link file:

    ```
    [Link]
    NamePolicy=kernel database onboard slot path
    MACAddressPolicy=persistent
    ```

    With this policy, udev will not rename interfaces if the kernel uses persistent names. If the kernel does not use persistent names, udev will rename the interface to the name provided by udev's hardware database. If this database is not available, OpenCloudOS falls back to the above mechanism.

    Also, for interface names based on Media Access Control (MAC) addresses, set the NamePolicy parameter in this file to mac.

5. The /usr/lib/udev/rules.d/80-net-setup-link.rules file defines that udev renames interfaces according to the udev-internal parameter in the following order:

    1. ID_NET_NAME_ONBOARD
    2. ID_NET_NAME_SLOT
    3. ID_NET_NAME_PATH
       If no parameter is set, udev will use the next parameter. If no parameters are set, the interface will not be renamed.

Steps 3 and 4 implement the naming schemes 1 through 4 described in Network Interface Device Naming Scheme.

## Predictable network interface name interpretation on 1.3.x86_64 platforms

When the consistent network device names feature is enabled, the udev device manager creates device names according to different standards. This section explains the naming scheme when installing OpenCloudOS on x86_64 platforms.

Interface names begin with a two-character prefix based on the interface type:

- en for Ethernet
- wl for wireless LAN (WLAN)
- ww for Wireless Wide Area Network (WWAN)

Additionally, one of the following is appended to one of the above prefixes depending on the mode applied by the udev device manager:

- o<on-board_index_number>

- s<hot_plug_slot_index_number>[f\<function>][d]

   Note that all multifunction PCI devices contain the number [f\<function>] in the device name, including function 0 devices.

- x<MAC_address>

- [P\<domain_number>]p\<bus>s\<slot>[f\<function>][d]

   The [P\<domain_number>] section defines the physical location of the PCI. This part is only set if the domain number is not 0 .

- [P\<domain_number>]p\<bus>s\<slot>[f\<function>][u][…][c\][i\<interface>]

   For USB devices, the full chain of hub port numbers consists of the hub's port numbers. If the name is larger than the maximum (15 characters), it will not be exported. If there are multiple USB devices in the chain, udev suppresses the default values for the USB configuration descriptor (c1) and USB interface descriptor (i0).

## 1.4. Predictable Network Interface Device Name Interpretation in System z Platforms

The udev device manager on System z platforms creates device names based on bus IDs when the consistent network device names feature is enabled. The bus ID identifies a device in the s390 channel subsystem.

For channel command word (CCW) devices, the bus ID is the device number prefixed with 0.n, where n is the subchannel set ID.

For example, an Ethernet interface is named enccw0.0.1234. For example, a Serial Line Internet Protocol (SLIP) channel-to-channel (CTC) network device is named slccw0.0.1234.

Use the znetconf -c or lscss -a commands to display available network devices and their bus IDs.

## 1.5. Disable interface device naming conventions during installation

This section describes how to disable interface device naming conventions during installation.

```
OpenCloudOS recommends against disabling this specification. Disabling the interface device naming convention may cause different types of problems, for example, after adding a network card, the device name assigned by the kernel will not be fixed, and the kernel may use different schemes to name the network card after each reboot.
```

process:

1. Boot the OpenCloudOS installation media

2. In Boot Manager, select Install OpenCloudOS and press the [Tab] key to edit the entry.

3. Append the net.ifnames=0 parameter to the kernel command line:

    ```
    vmlinu... net.ifnames=0
    ```

4. Press the [Enter] key to start the installation.

## 1.6. Disable interface device naming conventions in installed systems

This section describes how to disable interface device naming conventions on an installed Open Cloud OS system.

```
OpenCloudOS recommends against disabling this specification. Disabling the interface device naming convention may cause different types of problems, for example, after adding a network card, the device name assigned by the kernel will not be fixed, and the kernel may use different schemes to name the network card after each reboot.
```

**Prerequisites**

- The system has used the interface device naming convention by default

**process**

1. Edit the /etc/default/grub file and append the net.ifnames=0 parameter to the GRUB_CMDLINE_LINUX variable:

    ```
    GRUB_CMDLINE_LINUX="...net.ifnames=0"
    ```

2. Rebuild the grub.cfg file:

    - On systems with UEFI boot mode:

      ```
      # grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg
      ```

    - On systems using the old boot mode:

      ```
      # grub2-mkconfig -o /boot/grub2/grub.cfg
      ```

3. Display the current profile name and associated device name:

    ```
    # nmcli -f NAME,DEVICE,FILENAME connection show
     NAME           DEVICE  FILENAME
     System enp1s0  enp1s0  /etc/sysconfig/network-scripts/ifcfg-enp1s0
     System enp7s0  enp7s0  /etc/NetworkManager/system-connections/enp7s0.nmconnection
    ```

    Note which profile and file name each device is associated with.

4. Remove the HWADDR parameter from all connection profiles:

    ```
    # sed -i '/^HWADDR=/d' /etc/sysconfig/network-scripts/ifcfg-enp1s0 /etc/NetworkManager/system-connections/enp7s0.nmconnection
    ```

5. Display the MAC address associated with the Ethernet device:

    ```
    # ip link show
    ...
    2: enp1s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
         link/ether 00:53:00:c5:98:1c brd ff:ff:ff:ff:ff:ff
    3: enp7s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
         link/ether 00:53:00:b6:87:c6 brd ff:ff:ff:ff:ff:ff
    ```

6. Reboot the host:

    ```
    # reboot
    ```

7. After restarting, the Ethernet devices are displayed and the new interface name is recognized based on the MAC address:

    ```
    # ip link show
     ...
     2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
         link/ether 00:53:00:b6:87:c6 brd ff:ff:ff:ff:ff:ff
     3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
         link/ether 00:53:00:c5:98:1c brd ff:ff:ff:ff:ff:ff
    ```

    If you compare the current output with the previous output:

    - Interface enp7s0 (MAC address 00:53:00:b6:87:c6 ) is named eth0 now.
    - Interface enp1s0 (MAC address 00:53:00:c5:98:1c ) is named eth1 now.

8. Rename the configuration file:

    ```
    # mv /etc/NetworkManager/system-connections/enp7s0.nmconnection /etc/NetworkManager/system-connections/eth0.nmconnection
    # mv /etc/sysconfig/network-scripts/ifcfg-enp1s0 /etc/sysconfig/network-scripts/ifcfg-eth1
    ```

9. Reload NetworkManager:

    ```
    # nmcli connetction reload
    ```

10. If no file name is set in the configuration file, NetworkManager will use the default value. To determine the current profile name after renaming and reloading the connection, use the following command:

     ```
     # nmcli -f NAME,DEVICE,FILENAME connection show
     NAME           FILENAME
     System enp7s0  /etc/NetworkManager/system-connections/eth0.nmconnection
     System enp1s0  /etc/sysconfig/network-scripts/ifcfg-eth1
     ```

     Configure the file name in the next step.

11. Rename the NetworkManager connection profiles and update the interface names in each profile:

      ```
      # nmcli connection modify "System enp7s0" connection.id eth0 connection.interface-name eth0
      # nmcli connection modify "System enp1s0" connection.id eth1 connection.interface-name eth1
      ```

12. Reactivate the NetworkManager connection:

     ```
     # nmcli connection up eth0
     # nmcli connection up eth1
     ```

## 1.7. Custom Ethernet interface prefix

This section describes how to customize the prefix of Ethernet interface names during Open Cloud OS installation.

```
Customizing prefixes using the prefixdevname tool on installed systems is not currently supported.
```

After Open Cloud OS installation, the udev service will name ethernet devices in the format \<prefix>.\<index>. For example, if you wish to use net as a prefix, Open Cloud OS will name Ethernet interfaces net0 , net1 , and so on.

**Prerequisites**

- The prefix format requirements to be set are as follows:
   - consists of ASCII characters
   - only letters and numbers
   - less than 16 characters
   - Does not conflict with any existing network interface prefixes such as eth , eno , ens and em .

**process**

1. Boot the Open Cloud OS installation media.
2. In Boot Manager: a.
    1. Select the Install Open CLoud OS\<version> option and press the [Tab] key to edit the option.
    2. Append net.ifnames.prefix=\<prefix> to the kernel options.
    3. Press the [Enter] key to start the installer.
3. Install Open Cloud OS.

**verify**

- After installation, show ethernet interface:

   ```
   # ip link show
     ...
     2: net0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
         link/ether 00:53:00:c5:98:1c brd ff:ff:ff:ff:ff:ff
     3: net1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
         link/ether 00:53:00:c2:39:9e brd ff:ff:ff:ff:ff:ff
     ...
   ```

## 1.8. Assign custom network interface names using udev device manager

  udev device manager supports a set of rules to customize interface names

**process**

1. Display all network interfaces and their MAC addresses:

    ```
    # ip link list
    
     enp6s0f0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
         link/ether b4:96:91:14:ae:58 brd ff:ff:ff:ff:ff:ff
     enp6s0f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
         link/ether b4:96:91:14:ae:5a brd ff:ff:ff:ff:ff:ff
     enp4s0f0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
         link/ether 00:90:fa:6a:7d:90 brd ff:ff:ff:ff:ff:ff
    ```

2. Create the file /etc/udev/rules.d/70-custom-ifnames.rules with the following content:

    ```
    SUBSYSTEM=="net",ACTION=="add",ATTR{address}=="b4:96:91:14:ae:58",ATTR{type}=="1",NAME="provider0"
    SUBSYSTEM=="net",ACTION=="add",ATTR{address}=="b4:96:91:14:ae:5a",ATTR{type}=="1",NAME="provider1"
    SUBSYSTEM=="net",ACTION=="add",ATTR{address}=="00:90:fa:6a:7d:90",ATTR{type}=="1",NAME="provider2"
    ```

    These rules match the MAC addresses of network interfaces and rename them to the names specified in the NAME property. In these examples, the ATTR{type} parameter value set to 1 defines the interface type as Ethernet .

**verify**

1. Restart the system:

    ```
    # reboot
    ```

2. Verify that the interface name for each MAC address matches the value you set in the NAME parameter in the rules file:

    ```
    # ip link show
    
    provider0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
        link/ether b4:96:91:14:ae:58 brd ff:ff:ff:ff:ff:ff
    altname enp6s0f0
    provider1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
        link/ether b4:96:91:14:ae:5a brd ff:ff:ff:ff:ff:ff
        altname enp6s0f1
    provider2: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
        link/ether 00:90:fa:6a:7d:90 brd ff:ff:ff:ff:ff:ff
        altname enp4s0f0
    ```

## 1.9. Assign user-defined network interface names using the systemd linker file

Create a naming scheme by renaming the network interface to provider0.

**process**

1. Display all interface names and their MAC addresses:

    ```
    # ip link show
    
    enp6s0f0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
        link/ether b4:96:91:14:ae:58 brd ff:ff:ff:ff:ff:ff
    enp6s0f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
        link/ether b4:96:91:14:ae:5a brd ff:ff:ff:ff:ff:ff
    enp4s0f0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
        link/ether 00:90:fa:6a:7d:90 brd ff:ff:ff:ff:ff:ff
    ```

2. To name the interface with MAC address b4:96:91:14:ae:58 as provider0 , you need to create the /etc/systemd/network/70-custom-ifnames.link file with the following content:

    ```
    [Match]
    MACAddress=b4:96:91:14:ae:58
    
    [Link]
    Name=provider0
    ```

    This link file matches the MAC address and renames the network interface to the name set in the Name parameter.

**verify**

1. Restart the system:

    ```
    # reboot
    ```

2. Verify that the device with the MAC address you specified in the file is assigned to provider0 :

    ```
    # ip link show
    
    provider0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
        link/ether b4:96:91:14:ae:58 brd ff:ff:ff:ff:ff:ff
    ```

# Chapter 2 Getting Started with NetworkManager

By default, Open Cloud OS uses NetworkManager to manage and configure network connections.

## 2.1. Advantages of NetworkManager

The main advantages of using NetworkManager are:

- Provides an API via D-Bus, which allows querying and controlling network configuration and status. This allows multiple applications to check and configure the network, ensuring a synchronized and up-to-date network state. For example, the web console (monitoring and configuration services via a web browser) uses the NetworkManager D-BUS interface to configure the network, and the Gnome GUI, nmcli, and nm-connection-editor tools. Every change made to these tools will be detected by all other users.
- More convenient mirroring of network configuration: NetworkManager (NetworkManager) ensures that network connections are working properly. NetworkManager creates temporary connections to provide connectivity when it finds that there is no network configuration but there are network devices in the system.
- Provides users with easy connection setup: NetworkManager provides management through different tools - GUI, nmtui, nmcli.
- Support flexible configuration. For example, configure a WiFi interface and NetworkManager will scan and display available wifi networks. You can select an interface and NetworkManager will display the credentials needed to provide an automatic connection after the restart process. NetworkManager can configure network aliases, IP addresses, static routes, DNS information, and VPN connections as well as many connection-specific parameters. You can modify the configuration options to suit your needs.
- Persist the device state after the restart process and take over the interface that was set to managed mode during the restart process.
- Handles devices that are not explicitly set but are manually controlled by a user or other network device.

## 2.2. Overview of tools and programs for NetworkManager management connections

You can try the following tools to manage NetworkManager connections:

- nmcli : A command-line tool for managing connections.
- nmtui : Mouse cursor based to Text User Interface (TUI). Requires the NetworkManager-tui package to be installed.
- nm-connection-editor : Graphical User Interface (GUI) for NetworkManager related tasks. To start the program, type nm-connection-editor in a GNOME session terminal.
- control-center : GNOME Shell's GUI for desktop users. Note that this program supports fewer features than nm-connection-editor.
- Network Connection Icon in GNOME Shell: This icon indicates the status of your network connection and acts as a visual indicator of the type of connection you are using.

## 2.3. Load the manually configured ifcfg file into NetworkManager

In Open Cloud OS, if you edit the ifcfg file, NetworkManager does not automatically pick up the change. If you use one of these tools to update NetworkManager profile settings, NetworkManager will not implement those changes until you reconnect using that profile. For example, if a configuration file is modified using an editor, NetworkManager must read the configuration file again.

```
NetworkManager supports configuration sets stored in keyfile format. However, NetworkManager uses the ifcfg format by default when creating or updating configuration files using the NetworkManager API.
```

The /etc/sysconfig/ directory is where configuration files and scripts are located. With the exception of VPN, Mobile Broadband, and PPPoE configuration, most network configuration information is stored in the /etc/NetworkManager/ subdirectory. For example, interface-specific information is stored in the ifcfg file in the /etc/sysconfig/network-scripts/ directory.

Information for VPN, Mobile Broadband and PPPoE connections is stored in /etc/NetworkManager/system-connections/.

**process**

1. To load a new configuration file:

    ```
    # nmcli connection load /etc/sysconfig/network-scripts/ifcfg-connection_name
    ```

2. If you updated the connection file loaded into NetworkManager, enter:

    ```
    # nmcli connection up connection_name
    ```

# Chapter 3 Configuring NetworkManager to ignore certain devices

By default, NetworkManager manages all devices except the lo (loopback) device. However, you can configure NetworkManager to ignore certain devices, making them unmanaged. With this setting, you can manage these devices manually, for example using scripts.

## 3.1. Configure permanent unmanaged devices

You can configure a device to be unmanaged based on several criteria, such as interface name, MAC address, or device type. The following procedure describes how to permanently set the enp1s0 interface to unmanaged in NetworkManager.

**process**

1. Optional: Display a list of devices to identify the device you want to set as unmanaged:

    ```
    # nmcli device status
    DEVICE  TYPE      STATE         CONNECTION
    enp1s0  ethernet  disconnected  --
    ...
    ```

2. Create the /etc/NetworkManager/conf.d/99-unmanaged-devices.conf file:

    ```
    [keyfile]
    unmanaged-devices=interface-name:enp1s0
    ```

    To set multiple devices as unmanaged, separate the entries in the unmanaged-devices parameter with semicolons:

    ```
    [keyfile]
    unmanaged-devices=interface-name:interface_1;interface-name:interface_2;...
    ```

3. Reload the NetworkManager service:

    ```
    # systemctl reload NetworkManager
    ```

**verify**

- Display device list:

   ```
   # nmcli device status
   DEVICE  TYPE      STATE      CONNECTION
   enp1s0  ethernet  unmanaged  --
   ...
   ```

   The unmanaged status next to the enp1s0 device indicates that NetworkManager is not managing the device.

## 3.2. Configure temporary unmanaged devices

You can configure a device to be unmanaged based on several criteria, such as interface name, MAC address, or device type. This procedure describes how to temporarily set the enp1s0 interface to unmanaged in NetworkManager.

**process**

1. Optional: Display a list of devices to identify the device you want to set as unmanaged:

    ```
    # nmcli device status
    DEVICE  TYPE      STATE         CONNECTION
    enp1s0  ethernet  disconnected  --
    ...
    ```

2. Set the enp1s0 device to the unmanaged state:

    ```
    # nmcli device set enp1s0 managed no
    ```

**verify**

- Display device list:

   ```
   # nmcli device status
   DEVICE  TYPE      STATE      CONNECTION
   enp1s0  ethernet  unmanaged  --
   ...
   ```

   The unmanaged status next to the enp1s0 device indicates that NetworkManager is not managing the device.

# Chapter 4 Using the nmtui Text Interface to Manage Network Connections

## 4.1. Start the nmtui tool

**Prerequisites**

- NetworkManager-tui package installed

**process**

1. Start nmtui and enter at the command line:

    ```
    # nmtui
    ```

    ![nmtui启动界面](./assets/nmtui文本界面.png)

2. Enter nmtui:

    - In options, use the cursor or press the [Tab] key to move forward, press [Shift]+[Tab] to go back.
    - Use [Enter] to select an option.
    - Use [Space] to toggle the checkbox state.

## 4.2. Use nmtui to add connection configuration set

**Prerequisites**

- NetworkManager-tui package installed

**process**

1. Start nmtui and enter at the command line:

    ```
    # nmtui
    ```

2. Select the Edit a connection option and press [Enter] to enter editing.

3. Select the [Add] option and press [Enter] to enter.

4. Select Ethernet and press [Enter] to enter
    ![nmtui添加新连接](./assets/nmtui添加新连接.png)

5. Enter the connection details.
    ![nmtui连接配置详情](./assets/nmtui连接配置详情.png)

6. Select [OK] to save the changes.

7. Select Back to return to the main menu.

8. Select Activate a connection and select [Enter].

9. Select the new connection and press [Enter] to activate the connection.

10. Select [Back] to return to the main menu.

11. Choose Quit.

**verify**

1. Display device and connection status:

    ```
    # nmcli device status
    DEVICE      TYPE      STATE      CONNECTION
    ens3      ethernet  connected  ens3
    ```

2. Display all settings of the connection profile:

    ```
    # nmcli connection show ens3
    connection.id:                          ens3
    connection.uuid:                        f46c8406-74f4-458f-a884-a1889377aebc
    connection.stable-id:                   --
    connection.type:                        802-3-ethernet
    connection.interface-name:              ens3
    connection.autoconnect:                 yes
    connection.autoconnect-priority:        0
    ...
    ```

    Note that if the configuration on disk does not match the configuration in the device, starting or restarting NetworkManager will create an in-memory connection representing the device's configuration.

## 4.3. Change connection using nmtui application

After modifying a connection in nmtui, you must reactivate the connection. Note that reactivating a connection in nmtui temporarily deactivates the connection.

**Prerequisites**

- The connection profile does not have the auto-connect setting enabled.

**process**

1. Select the Activate a connection option from the main menu:
    ![nmtui修改连接_1](./assets/nmtui修改连接_1.png)
2. Select the modified connection.
3. On the right, select the Deactivate button and press [Enter]:
    ![nmtui修改连接_2](./assets/nmtui修改连接_2.png)
4. Select Connect again.
5. On the right, select the Activate button and press [Enter]:
    ![nmtui修改连接_3](./assets/nmtui修改连接_3.png)

# Chapter 5 Getting Started with nmcli

## 5.1. nmcli output in different formats

The nmcli tool supports controlling the output of commands through different parameters. By using these options, you can display only the information you need. This simplifies the process of processing output in scripts.

By default, nmcli displays its output in a table-like format:

```
# nmcli device
DEVICE      TYPE      STATE                   CONNECTION
ens3        ethernet  connected               ens3
virbr0      bridge    connected (externally)  virbr0
lo          loopback  unmanaged               --
virbr0-nic  tun       unmanaged               --
```

Using the -f parameter, you can display columns in a custom order, for example:

```
# nmcli -f DEVICE,STATE device
DEVICE      STATE
ens3        connected
virbr0      connected (externally)
lo          unmanaged
virbr0-nic  unmanaged
```

Use the -t parameter to display each field of the output in colon-separated form:

```
# nmcli -t device
ens3:ethernet:connected:ens3
virbr0:bridge:connected (externally):virbr0
lo:loopback:unmanaged:
virbr0-nic:tun:unmanaged:
```

When you use a script to process output, combine -f with -t to display only specific fields in colon-separated form:

```
# nmcli -f DEVICE,STATE -t device
ens3:connected
virbr0:connected (externally)
lo:unmanaged
virbr0-nic:unmanaged
```

## 5.2. Use the tab key to automatically complete nmcli commands

The nmcli tool supports tab completion if the bash-completion package is installed on your host machine. This allows you to autocomplete option names and identify possible options and values.

For example, if you type nmcli con and press Tab, the shell autocompletes the command nmcli connection.

The option or value you enter must be unique. If it is not unique, nmcli displays all possible options. For example, if you type nmcli connection d , and press Tab , the command displays the commands delete and down as possible options.

You can also use tab completion to display all properties that can be set in a connection configuration set. For example, if you type nmcli connection modify connection_name and press Tab, the command displays the full list of available properties.

## 5.3. Commonly used nmcli commands

- Display a list of connection profiles:

   ```
   # nmcli connection show
   NAME    UUID                                  TYPE      DEVICE
   ens3    f46c8406-74f4-458f-a884-a1889377aebc  ethernet  ens3
   ```

- Display the configuration for the specified connection:

   ```
   # nmcli connection show CONNECTION-NAME
   connection.id:                          ens3
   connection.uuid:                        f46c8406-74f4-458f-a884-a1889377aebc
   connection.stable-id:                   --
   connection.type:                        802-3-ethernet
   connection.interface-name:              ens3
   connection.autoconnect:                 yes
   ...
   ```

- modify connection properties:

   ```
   nmcli connection modify CONNECTION-NAME PROPERTY VALUE
   ```

   Supports simultaneous modification of multiple properties using multiple PROPERTY VALUE combinations.

- Displays a list of network devices, status, type and connection sets:

   ```
   # nmcli device
   DEVICE      TYPE      STATE                   CONNECTION
   ens3        ethernet  connected               ens3
   ...
   ```

- Activate connection:

   ```
   # nmcli connection up CONNECTION-NAME
   ```

- Deactivate connection:

   ```
   # nmcli connection down CONNECTION-NAME
   ```

# Chapter 6 Getting started with configuring a network using the GNOME GUI

You can manage and configure network connections in GNOME using:

- the GNOME Shell network connection icon in the upper right corner of the desktop
- GNOME control-center application
- GNOME nm-connection-editor application

## 6.1. Manage network connections through desktop icons

**Prerequisites**

- The GNOME package group is installed.
- You are logged into GNOME.
- If the network requires specific configuration, such as a static IP address or 802.1x configuration, then a connection profile needs to have been created.

**process**

1. Click the network connection icon in the upper right corner of the desktop.

    ![GNOME配置网络_1](./assets/GNOME配置网络_1.png)

2. Depending on the connection type, select Wired or Wi-Fi.

    ![GNOME配置网络_2](./assets/GNOME配置网络_2.png)

3. For a wired connection, select Connect to connect to the network.


4. For a Wi-Fi connection, tap Select network, choose the network you want to connect to, and enter the password